"""
# ------------------------------------------------------------
# HealthSenseAI
# Created & Developed by: Lavanya Srivastava
# Purpose: Public Health Awareness using Generative AI + RAG
# Educational use only тАУ not a medical diagnostic system
# ------------------------------------------------------------

app.py
Streamlit UI for HealthSenseAI (Groq + RAG).

Run with:
    streamlit run src/app.py
"""

import streamlit as st

from config import Settings, get_llm
from rag_pipeline import HealthSenseRAG


def init_session_state() -> None:
    if "messages" not in st.session_state:
        st.session_state.messages = []


def main() -> None:
    # -------------------- Page configuration --------------------
    st.set_page_config(
        page_title="HealthSenseAI тАУ Public Health Awareness Assistant",
        page_icon="ЁЯй║",
        layout="wide",
    )

    init_session_state()

    # -------------------- Header styling --------------------
    st.markdown(
        """
        <style>
        .main-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 0.3rem;
        }
        .creator {
            font-size: 1.2rem;
            font-weight: 700;
            color: #0d6efd;
            margin-bottom: 0.6rem;
        }
        .sub-title {
            font-size: 1.1rem;
            color: #6c757d;
            margin-bottom: 1.4rem;
        }
        </style>
        """,
        unsafe_allow_html=True,
    )

    st.markdown('<div class="main-title">HealthSenseAI</div>', unsafe_allow_html=True)
    st.markdown(
        '<div class="creator">ЁЯСйтАНЁЯТ╗ Created & Developed by <strong>Lavanya Srivastava</strong></div>',
        unsafe_allow_html=True,
    )
    st.markdown(
        '<div class="sub-title">'
        'A Generative AI Assistant for <strong>Public Health Awareness & Early Risk Guidance</strong>. '
        'Educational use only тАУ not a diagnostic tool.'
        "</div>",
        unsafe_allow_html=True,
    )
    st.markdown("")

    # Load settings once (shared by sidebar and main area)
    settings = Settings.from_env()

    # -------------------- Sidebar --------------------
    with st.sidebar:
        st.header("Settings")
        st.write(
            "You can type your question in any language. "
            "The assistant will reply in the same language."
        )

        st.markdown("---")
        st.subheader("Knowledge Base")

        uploaded_pdfs = st.file_uploader(
            "Upload health guideline PDFs (WHO / MoHFW / national):",
            type=["pdf"],
            accept_multiple_files=True,
            help="Files will be stored in the projectтАЩs data/raw directory.",
        )

        if uploaded_pdfs:
            saved_files = []
            for up_file in uploaded_pdfs:
                save_path = settings.data_raw_dir / up_file.name
                with open(save_path, "wb") as f:
                    f.write(up_file.getbuffer())
                saved_files.append(up_file.name)

            st.success(
                f"Uploaded {len(saved_files)} PDF file(s). "
                "Restart the app so that they are included in the index."
            )

        pdf_count = len(list(settings.data_raw_dir.glob("*.pdf")))
        st.caption(
            f"Guideline PDF files currently detected in data/raw/: **{pdf_count}**"
        )

        st.markdown(
            "- Place WHO / national guideline PDFs in `data/raw/`.\n"
            "- The app automatically (re)builds a FAISS index from these files at startup."
        )

        st.markdown("---")
        st.subheader("Disclaimer")
        st.info(
            "This assistant is designed for public health education only.\n\n"
            "- It does not provide diagnosis or treatment.\n"
            "- It does not prescribe medication or dosages.\n"
            "- It should not replace consultation with qualified healthcare professionals."
        )

    # -------------------- RAG Engine --------------------
    llm = get_llm(settings)
    rag_engine = HealthSenseRAG(settings=settings, llm=llm)

    # Build index ONCE at app start
    rag_engine.build_or_load_index()

    # -------------------- Main Chat Area --------------------
    st.markdown("### Ask a health awareness question")

    with st.expander("Examples (from your guideline PDFs)", expanded=False):
        st.markdown(
            """
### тЭдя╕ПтАНЁЯй╣ 1) Hypertension_full.pdf тАУ Sample Questions

**ЁЯЗмЁЯЗз ENGLISH (EN)**
- What lifestyle changes are recommended to prevent high blood pressure?
- At what blood pressure level is hypertension usually diagnosed in adults?
- How often should adults have their blood pressure checked according to the guideline?
- What warning signs suggest that a person with hypertension should seek urgent medical care?

**ЁЯЗоЁЯЗ│ рд╣рд┐рдВрджреА (HI)**
- рд╣рд╛рдИ рдмреНрд▓рдб рдкреНрд░реЗрд╢рд░ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди-рд╕реЗ рдЬреАрд╡рдирд╢реИрд▓реА рдмрджрд▓рд╛рд╡ рд╕реБрдЭрд╛рдП рдЧрдП рд╣реИрдВ?
- рд╡рдпрд╕реНрдХреЛрдВ рдореЗрдВ рдХрд┐рд╕ рд╕реНрддрд░ рдкрд░ рдмреНрд▓рдб рдкреНрд░реЗрд╢рд░ рд╣реЛрдиреЗ рдкрд░ рдЙрд╕реЗ рд╣рд╛рдИрдкрд░рдЯреЗрдВрд╢рди рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ?
- рджрд┐рд╢рд╛-рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╡рдпрд╕реНрдХреЛрдВ рдХреЛ рдмреНрд▓рдб рдкреНрд░реЗрд╢рд░ рдХреА рдЬрд╛рдВрдЪ рдХрд┐рддрдиреА рдмрд╛рд░ рдХрд░рд╛рдиреА рдЪрд╛рд╣рд┐рдП?
- рд╣рд╛рдИрдкрд░рдЯреЗрдВрд╢рди рд╡рд╛рд▓реЗ рд╡реНрдпрдХреНрддрд┐ рдХреЛ рддреБрд░рдВрдд рдбреЙрдХреНрдЯрд░ рдХреЗ рдкрд╛рд╕ рдЬрд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реЛрдиреЗ рдХреЗ рдХреМрди-рд╕реЗ рдЪреЗрддрд╛рд╡рдиреА рд▓рдХреНрд╖рдг рд╣реИрдВ?

**ЁЯЗоЁЯЗ│ рдорд░рд╛рдареА (MR)**
- рдЙрдЪреНрдЪ рд░рдХреНрддрджрд╛рдм рдЯрд╛рд│рдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдгрддреЗ рдЬреАрд╡рдирд╢реИрд▓реА рдмрджрд▓ рдХрд░рдгреНрдпрд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдЖрд╣реЗ?
- рд╡рдпрд╕реНрдХ рд╡реНрдпрдХреНрддреАрдд рдХреЛрдгрддреНрдпрд╛ рд░рдХреНрддрджрд╛рдм рдкрд╛рддрд│реАрд╡рд░ рдЙрдЪреНрдЪ рд░рдХреНрддрджрд╛рдм (рд╣рд╛рдпрдкрд░рдЯреЗрдВрд╢рди) рдирд┐рджрд╛рди рдХреЗрд▓реЗ рдЬрд╛рддреЗ?
- рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ рд╕реВрдЪрдирд╛рдВрдиреБрд╕рд╛рд░ рдкреНрд░реМрдврд╛рдВрдиреА рд░рдХреНрддрджрд╛рдм рддрдкрд╛рд╕рдгреА рдХрд┐рддреА рд╡реЗрд│рд╛ рдХрд░рд╛рд╡реА?
- рдЙрдЪреНрдЪ рд░рдХреНрддрджрд╛рдм рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рд░реБрдЧреНрдгрд╛рдиреЗ рддрд╛рддрдбреАрдиреЗ рдбреЙрдХреНрдЯрд░рд╛рдВрдХрдбреЗ рдЬрд╛рд╡реЗ рдЕрд╕реЗ рдХреЛрдгрддреЗ рдЗрд╢рд╛рд░реЗ / рд▓рдХреНрд╖рдгреЗ рдЖрд╣реЗрдд?

**ЁЯЗоЁЯЗ│ ркЧрлБркЬрк░рк╛ркдрлА (GU)**
- рк╣рк╛ркЗ ркмрлНрк▓ркб рккрлНрк░рлЗрк╢рк░ ркЕркЯркХрк╛рк╡рк╡рк╛ ркорк╛ркЯрлЗ ркХркпрк╛ ркЬрлАрк╡ркирк╢рлИрк▓рлА рккрк░рк┐рк╡рк░рлНркдркирлЛркирлА ркнрк▓рк╛ркоркг ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлА ркЫрлЗ?
- рккрлБркЦрлНркд рк╡ркпркирк╛ рк▓рлЛркХрлЛркорк╛ркВ ркХркпрк╛ ркмрлНрк▓ркб рккрлНрк░рлЗрк╢рк░ рк╕рлНркдрк░рлЗ рк╣рк╛ркЗрккрк░ркЯрлЗркирлНрк╢рки ркорк╛ркирк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ?
- ркорк╛рк░рлНркЧркжрк░рлНрк╢рк┐ркХрк╛ ркорлБркЬркм рккрлБркЦрлНркд рк▓рлЛркХрлЛркП ркмрлНрк▓ркб рккрлНрк░рлЗрк╢рк░ ркЪрлЗркХ ркХрлЗркЯрк▓рк╛ рк╕ркоркпрк╛ркВркдрк░рлЗ ркХрк░рк╛рк╡рк╡рлБркВ ркЬрлЛркИркП?
- рк╣рк╛ркЗрккрк░ркЯрлЗркирлНрк╢рки ркзрк░рк╛рк╡ркдрк╛ рк╡рлНркпркХрлНркдрк┐ркП ркдрк╛ркдрлНркХрк╛рк▓рк┐ркХ ркбрлЙркХрлНркЯрк░ркирлЗ ркорк│рк╡рк╛ ркорк╛ркЯрлЗ ркХркпрк╛ ркЪрлЗркдрк╡ркгрлА рк▓ркХрлНрк╖ркгрлЛ ркзрлНркпрк╛ркиркорк╛ркВ рк▓рлЗрк╡рк╛ркВ ркЬрлЛркИркП?

**ЁЯЗоЁЯЗ│ родрооро┐ро┤рпН (TA)**
- роЙропро░рпН роЗро░родрпНрод роЕро┤рпБродрпНродродрпНродрпИродрпН родроЯрпБроХрпНроХ роОроирпНрод ро╡ро╛ро┤рпНроХрпНроХрпИроорпБро▒рпИ рооро╛ро▒рпНро▒роЩрпНроХро│рпН рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой?
- рокрпЖро░ро┐ропро╡ро░рпНроХро│ро┐ро▓рпН роОроирпНрод роЕро│ро╡рпБроХрпНроХрпБ роЗро░родрпНрод роЕро┤рпБродрпНродроорпН роЗро░рпБроирпНродро╛ро▓рпН роЙропро░рпН роЗро░родрпНрод роЕро┤рпБродрпНродроорпН (hypertension) роОройрпНро▒рпБ роХро░рпБродрокрпНрокроЯрпБроорпН?
- ро╡ро┤ро┐роХро╛роЯрпНроЯро┐ рокроЯро┐ рокрпЖро░ро┐ропро╡ро░рпНроХро│рпН роОродрпНродройрпИ роЗроЯрпИро╡рпЖро│ро┐ропро┐ро▓рпН роЗро░родрпНрод роЕро┤рпБродрпНродродрпНродрпИ рокро░ро┐роЪрпЛродро┐роХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН?
- роЙропро░рпН роЗро░родрпНрод роЕро┤рпБродрпНродроорпН роЙро│рпНро│ро╡ро░рпНроХро│рпБроХрпНроХрпБ роЙроЯройроЯро┐ рооро░рпБродрпНродрпБро╡ роЙродро╡ро┐ родрпЗро╡рпИрокрпНрокроЯрпБроХро┐ро▒родро╛ роОройрпНрокродрпИ роХро╛роЯрпНроЯрпБроорпН роОродрпНродроХрпИроп роОроЪрпНроЪро░ро┐роХрпНроХрпИ роЕро▒ро┐роХрпБро▒ро┐роХро│рпН роЙро│рпНро│рой?

**ЁЯЗоЁЯЗ│ р░др▒Жр░▓р▒Бр░Чр▒Б (TE)**
- р░╣р▒И р░мр▒Нр░▓р░бр▒Н р░кр▒Нр░░р▒Жр░Ьр░░р▒НтАМр░ир▒Б р░ир░┐р░╡р░╛р░░р░┐р░Вр░Ър░бр░╛р░ир░┐р░Хр░┐ р░П р░Ьр▒Ар░╡р░ир░╢р▒Ир░▓р░┐ р░ор░╛р░░р▒Нр░кр▒Бр░▓р░ир▒Б р░ор░╛р░░р▒Нр░Чр░жр░░р▒Нр░╢р░Хр░╛р░▓р▒Б р░╕р▒Вр░Ър░┐р░╕р▒Нр░др░╛р░пр░┐?
- р░кр▒Жр░жр▒Нр░жр░▓р░▓р▒Л р░П р░╕р▒Нр░ер░╛р░пр░┐ р░░р░Хр▒Нр░др░кр▒Лр░Яр▒Б р░╡р░Ър▒Нр░Ър░┐р░ир░кр▒Нр░кр▒Бр░бр▒Б р░жр░╛р░ир▒Нр░ир░┐ р░╣р▒Ир░кр░░р▒НтАМр░Яр▒Жр░ир▒Нр░╖р░ир▒НтАМр░Чр░╛ р░кр░░р░┐р░Чр░гр░┐р░╕р▒Нр░др░╛р░░р▒Б?
- р░ор░╛р░░р▒Нр░Чр░жр░░р▒Нр░╢р░Х р░кр▒Нр░░р░Хр░╛р░░р░В р░кр▒Жр░жр▒Нр░жр░╡р░╛р░░р▒Б р░Ор░Вр░д р░Хр░╛р░▓ р░╡р▒Нр░пр░╡р░зр░┐р░▓р▒Л р░Тр░Хр░╕р░╛р░░р░┐ р░░р░Хр▒Нр░др░кр▒Лр░Яр▒Б р░Ър▒Жр░Хр▒Н р░Ър▒Зр░пр░┐р░Вр░Ър▒Бр░Хр▒Лр░╡р░╛р░▓р░┐?
- р░╣р▒Ир░кр░░р▒НтАМр░Яр▒Жр░ир▒Нр░╖р░ир▒Н р░Йр░ир▒Нр░и р░╡р▒Нр░пр░Хр▒Нр░др░┐ р░др░Хр▒Нр░╖р░г р░╡р▒Ир░жр▒Нр░п р░╕р░╣р░╛р░пр░В р░др▒Ар░╕р▒Бр░Хр▒Лр░╡р░▓р░╕р░┐р░и р░кр▒Нр░░р░ор░╛р░ж р░╕р▒Вр░Ър░ир░▓р▒Б р░Пр░ор░┐р░Яр░┐?

**ЁЯЗзЁЯЗй ржмрж╛ржВрж▓рж╛ (BN)**
- ржЙржЪрзНржЪ рж░ржХрзНрждржЪрж╛ржк ржкрзНрж░рждрж┐рж░рзЛржзрзЗ ржХрзЛржи ржХрзЛржи ржЬрзАржмржиржпрж╛ржкржи ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?
- ржкрзНрж░рж╛ржкрзНрждржмржпрж╝рж╕рзНржХржжрзЗрж░ ржоржзрзНржпрзЗ ржХрзЛржи рж╕рзНрждрж░рзЗрж░ рж░ржХрзНрждржЪрж╛ржкржХрзЗ рж╕рж╛ржзрж╛рж░ржгржд рж╣рж╛ржЗржкрж╛рж░ржЯрзЗржирж╢ржи ржмрж▓рж╛ рж╣ржпрж╝?
- ржЧрж╛ржЗржбрж▓рж╛ржЗржи ржЕржирзБржпрж╛ржпрж╝рзА ржкрзНрж░рж╛ржкрзНрждржмржпрж╝рж╕рзНржХржжрзЗрж░ ржХржд рж╕ржоржпрж╝ ржЕржирзНрждрж░ рж░ржХрзНрждржЪрж╛ржк ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛ ржЙржЪрж┐ржд?
- ржЙржЪрзНржЪ рж░ржХрзНрждржЪрж╛ржкрзЗрж░ рж░рзЛржЧрзАрж░ ржЕржмрж┐рж▓ржорзНржмрзЗ ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржирзЛ ржкрзНрж░ржпрж╝рзЛржЬржи, ржПржоржи ржХрзЛржи рж╕рждрж░рзНржХрждрж╛ржорзВрж▓ржХ рж▓ржХрзНрж╖ржгржЧрзБрж▓рзЛ ржЖржЫрзЗ?


---

### ЁЯСйтАНЁЯН╝ 2) WHO recommendation on diabetes care for women.pdf тАУ Sample Questions

**ЁЯЗмЁЯЗз ENGLISH (EN)**
- Which women are considered at higher risk of developing diabetes according to the guideline?
- What screening tests are recommended for women who are at risk of diabetes?
- What dietary advice is given to women living with diabetes?
- After pregnancy, how should women with a history of gestational diabetes be followed up?

**ЁЯЗоЁЯЗ│ рд╣рд┐рдВрджреА (HI)**
- рджрд┐рд╢рд╛-рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХрд┐рди рдорд╣рд┐рд▓рд╛рдУрдВ рдХреЛ рдордзреБрдореЗрд╣ рд╣реЛрдиреЗ рдХрд╛ рдЕрдзрд┐рдХ рдЬреЛрдЦрд┐рдо рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ?
- рдордзреБрдореЗрд╣ рдХреЗ рдЦрддрд░реЗ рд╡рд╛рд▓реА рдорд╣рд┐рд▓рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХреМрди-рдХреМрди рд╕реЗ рд╕реНрдХреНрд░реАрдирд┐рдВрдЧ рдЯреЗрд╕реНрдЯ рд╕реБрдЭрд╛рдП рдЧрдП рд╣реИрдВ?
- рдордзреБрдореЗрд╣ рд╕реЗ рдкреАрдбрд╝рд┐рдд рдорд╣рд┐рд▓рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдЖрд╣рд╛рд░ рд╕рдВрдмрдВрдзреА рд╕рд▓рд╛рд╣ рджреА рдЧрдИ рд╣реИ?
- рдЧрд░реНрднрд╛рд╡рд╕реНрдерд╛ рдореЗрдВ рдЧрд░реНрднрдХрд╛рд▓реАрди рдордзреБрдореЗрд╣ рд░рд╣рд╛ рд╣реЛ рддреЛ рдбрд┐рд▓реАрд╡рд░реА рдХреЗ рдмрд╛рдж рдорд╣рд┐рд▓рд╛рдУрдВ рдХреА рдлреЙрд▓реЛ-рдЕрдк рдЬрд╛рдВрдЪ рдХреИрд╕реЗ рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдП?

**ЁЯЗоЁЯЗ│ рдорд░рд╛рдареА (MR)**
- рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ рд╕реВрдЪрдирд╛рдВрдиреБрд╕рд╛рд░ рдордзреБрдореЗрд╣ рд╣реЛрдгреНрдпрд╛рдЪрд╛ рдЬрд╛рд╕реНрдд рдзреЛрдХрд╛ рдХреЛрдгрддреНрдпрд╛ рдорд╣рд┐рд▓рд╛рдВрдирд╛ рдЕрд╕рддреЛ?
- рдордзреБрдореЗрд╣рд╛рдЪреНрдпрд╛ рдзреЛрдХреНрдпрд╛рдд рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдорд╣рд┐рд▓рд╛рдВрд╕рд╛рдареА рдХреЛрдгрддреНрдпрд╛ рд╕реНрдХреНрд░реАрдирд┐рдВрдЧ рдЪрд╛рдЪрдгреНрдпрд╛ рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реНрдпрд╛ рдЖрд╣реЗрдд?
- рдордзреБрдореЗрд╣ рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдорд╣рд┐рд▓рд╛рдВрд╕рд╛рдареА рдХреЛрдгрддреЗ рдЖрд╣рд╛рд░ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рджрд┐рд▓реЗ рдЖрд╣реЗ?
- рдЧрд░реНрднрдзрд╛рд░рдгреЗрджрд░рдореНрдпрд╛рди рдЧреЗрд╕реНрдЯреЗрд╢рдирд▓ рдбрд╛рдпрдмрд┐рдЯреАрдЬ рдЭрд╛рд▓реЗрд▓реНрдпрд╛ рдорд╣рд┐рд▓рд╛рдВрдЪреЗ рдкреНрд░рд╕реВрддреАрдирдВрддрд░ рдлреЙрд▓реЛ-рдЕрдк рдХрд╕реЗ рдХрд░рд╛рд╡реЗ рдЕрд╢реА рд╢рд┐рдлрд╛рд░рд╕ рдЖрд╣реЗ?

**ЁЯЗоЁЯЗ│ ркЧрлБркЬрк░рк╛ркдрлА (GU)**
- ркорк╛рк░рлНркЧркжрк░рлНрк╢рк┐ркХрк╛ ркорлБркЬркм ркХркИ ркорк╣рк┐рк▓рк╛ркУркирлЗ ркбрк╛ркпрк╛ркмрк┐ркЯрлАрк╕ркирлЛ рк╡ркзрлБ ркЬрлЛркЦрко ркзрк░рк╛рк╡ркдрк╛ рк░рлВрккрлЗ ркЧркгрк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ?
- ркбрк╛ркпрк╛ркмрк┐ркЯрлАрк╕ркирк╛ ркЬрлЛркЦрко ркзрк░рк╛рк╡ркдрлА ркорк╣рк┐рк▓рк╛ркУ ркорк╛ркЯрлЗ ркХркпрк╛ рк╕рлНркХрлНрк░рлАркирк┐ркВркЧ ркЯрлЗрк╕рлНркЯркирлА ркнрк▓рк╛ркоркг ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлА ркЫрлЗ?
- ркбрк╛ркпрк╛ркмрк┐ркЯрлАрк╕ ркзрк░рк╛рк╡ркдрлА ркорк╣рк┐рк▓рк╛ркУ ркорк╛ркЯрлЗ ркХркИ ркЖрк╣рк╛рк░ рк╕ркВркмркВркзрк┐ркд рк╕рк▓рк╛рк╣ ркЖрккрк╡рк╛ркорк╛ркВ ркЖрк╡рлА ркЫрлЗ?
- ркЧрк░рлНркнрк╛рк╡рк╕рлНркерк╛ ркжрк░ркорк┐ркпрк╛рки ркЧрлЗрк╕рлНркЯрлЗрк╢ркирк▓ ркбрк╛ркпрк╛ркмрк┐ркЯрлАрк╕ ркеркпрлЗрк▓рлА ркорк╣рк┐рк▓рк╛ркУркирлА ркбрк┐рк▓рк┐рк╡рк░рлА рккркЫрлА рклрлЛрк▓рлЛ-ркЕркк ркХрлЗрк╡рлА рк░рлАркдрлЗ ркХрк░рк╡рлЛ?

**ЁЯЗоЁЯЗ│ родрооро┐ро┤рпН (TA)**
- ро╡ро┤ро┐роХро╛роЯрпНроЯро┐ рокроЯро┐ роОроирпНрод рокрпЖрогрпНроХро│рпН роирпАро░ро┐ро┤ро┐ро╡рпБ роирпЛропрпН роПро▒рпНрокроЯрпБроорпН роЕродро┐роХ роЖрокродрпНродро┐ро▓рпН роЙро│рпНро│ро╡ро░рпНроХро│ро╛роХ роХро░рпБродрокрпНрокроЯрпБроХро┐ройрпНро▒ройро░рпН?
- роирпАро░ро┐ро┤ро┐ро╡рпБ роЖрокродрпНродро┐ро▓рпН роЙро│рпНро│ рокрпЖрогрпНроХро│рпБроХрпНроХрпБ роОроирпНрод ро╕рпНроХрпНро░рпАройро┐роЩрпН рокро░ро┐роЪрпЛродройрпИроХро│рпН рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой?
- роирпАро░ро┐ро┤ро┐ро╡рпБ роЙро│рпНро│ рокрпЖрогрпНроХро│рпБроХрпНроХрпБ роОроирпНрод роЙрогро╡рпБ рокро░ро┐роирпНродрпБро░рпИроХро│рпН роХрпВро▒рокрпНрокроЯрпНроЯрпБро│рпНро│рой?
- роХро░рпНрокрпНрок роХро╛ро▓родрпНродро┐ро▓рпН gestational diabetes роЗро░рпБроирпНрод рокрпЖрогрпНроХро│рпБроХрпНроХрпБ рокро┐ро░роЪро╡родрпНродро┐ро▒рпНроХрпБрокрпН рокро┐ро▒роХрпБ роОрокрпНрокроЯро┐рокрпНрокроЯрпНроЯ рокро┐ройрпНродрпКроЯро░рпН (follow-up) рокро░ро╛рооро░ро┐рокрпНрокрпБ роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН?

**ЁЯЗоЁЯЗ│ р░др▒Жр░▓р▒Бр░Чр▒Б (TE)**
- р░ор░╛р░░р▒Нр░Чр░жр░░р▒Нр░╢р░Х р░кр▒Нр░░р░Хр░╛р░░р░В р░П р░ор░╣р░┐р░│р░▓р░ир▒Б р░бр░пр░╛р░мр▒Жр░Яр▒Ар░╕р▒Н р░╡р░Ър▒Нр░Ър▒З р░Ер░зр░┐р░Х р░кр▒Нр░░р░ор░╛р░ж р░Чр▒Бр░Вр░кр▒Бр░Чр░╛ р░кр░░р░┐р░Чр░гр░┐р░╕р▒Нр░др░╛р░░р▒Б?
- р░бр░пр░╛р░мр▒Жр░Яр▒Ар░╕р▒Н р░кр▒Нр░░р░ор░╛р░жр░Вр░▓р▒Л р░Йр░ир▒Нр░и р░ор░╣р░┐р░│р░▓р░Хр▒Б р░П р░╕р▒Нр░Хр▒Нр░░р▒Ар░ир░┐р░Вр░Чр▒Н р░кр░░р▒Ар░Хр▒Нр░╖р░▓р░ир▒Б р░╕р▒Вр░Ър░┐р░╕р▒Нр░др▒Бр░ир▒Нр░ир░╛р░░р▒Б?
- р░бр░пр░╛р░мр▒Жр░Яр▒Ар░╕р▒Н р░Йр░ир▒Нр░и р░ор░╣р░┐р░│р░▓р░Хр▒Б р░П р░╡р░┐р░зр░ор▒Ир░и р░Жр░╣р░╛р░░ р░╕р▒Вр░Ър░ир░▓р▒Б р░Йр░ир▒Нр░ир░╛р░пр░┐?
- р░Чр░░р▒Нр░нр░зр░╛р░░р░г р░╕р░ор░пр░Вр░▓р▒Л р░Чр▒Жр░╕р▒Нр░Яр▒Зр░╖р░ир░▓р▒Н р░бр░пр░╛р░мр▒Жр░Яр▒Ар░╕р▒Н р░╡р░Ър▒Нр░Ър░┐р░и р░ор░╣р░┐р░│р░▓р░Хр▒Б р░бр▒Жр░▓р░┐р░╡р░░р▒А р░др░░р▒Нр░╡р░╛р░д р░Ор░▓р░╛ follow-up р░Ър▒Зр░пр░╛р░▓р░ир░┐ р░ор░╛р░░р▒Нр░Чр░жр░░р▒Нр░╢р░Хр░╛р░▓р▒Б р░Ър▒Жр░мр▒Бр░др░╛р░пр░┐?

**ЁЯЗзЁЯЗй ржмрж╛ржВрж▓рж╛ (BN)**
- ржЧрж╛ржЗржбрж▓рж╛ржЗржи ржЕржирзБржпрж╛ржпрж╝рзА ржХрзЛржи ржХрзЛржи ржирж╛рж░рзАржХрзЗ ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕ рж╣ржУржпрж╝рж╛рж░ ржЙржЪрзНржЪ ржЭрзБржБржХржкрзВрж░рзНржг рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рж╛ рж╣ржпрж╝?
- ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕рзЗрж░ ржЭрзБржБржХрж┐рждрзЗ ржерж╛ржХрж╛ ржирж╛рж░рзАржжрзЗрж░ ржЬржирзНржп ржХрзЛржи рж╕рзНржХрзНрж░рж┐ржирж┐ржВ ржкрж░рзАржХрзНрж╖рж╛рж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?
- ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕рзЗ ржЖржХрзНрж░рж╛ржирзНржд ржирж╛рж░рзАржжрзЗрж░ ржЬржирзНржп ржХрзА ржзрж░ржирзЗрж░ ржЦрж╛ржжрзНржпрж╛ржнрзНржпрж╛рж╕рзЗрж░ ржкрж░рж╛ржорж░рзНрж╢ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗ?
- ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛ржпрж╝ ржЧрзЗрж╕рзНржЯрзЗрж╢ржирж╛рж▓ ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕ ржерж╛ржХрж╛ ржирж╛рж░рзАржжрзЗрж░ ржкрзНрж░рж╕ржмрзЗрж░ ржкрж░ ржХрзАржнрж╛ржмрзЗ ржлрж▓рзЛ-ржЖржк ржХрж░рж╛ ржЙржЪрж┐ржд ржмрж▓рзЗ ржирж┐рж░рзНржжрзЗрж╢рж┐ржХрж╛ржпрж╝ ржЙрж▓рзНрж▓рзЗржЦ ржЖржЫрзЗ?
"""
        )

    # Display conversation history
    for msg in st.session_state.messages:
        with st.chat_message(msg["role"]):
            st.markdown(msg["content"])

    # Chat input
    user_input = st.chat_input(
        "Type a question about symptoms, prevention, lifestyle, or screenings..."
    )

    if user_input:
        # Store and display user message
        st.session_state.messages.append({"role": "user", "content": user_input})
        with st.chat_message("user"):
            st.markdown(user_input)

        # Generate and display assistant response
        with st.chat_message("assistant"):
            with st.spinner("Consulting public health guidelines..."):
                try:
                    response = rag_engine.answer_query(user_input)
                except Exception as e:
                    st.error(f"An error occurred while generating the answer: {e}")
                    return

                st.markdown(response)

        st.session_state.messages.append({"role": "assistant", "content": response})

    st.markdown(
        "---\n"
        "Developed as an educational project demonstrating Generative AI + Retrieval-Augmented Generation (RAG) "
        "for public health awareness. Always seek advice from licensed medical professionals for any personal health concerns."
    )


if __name__ == "__main__":
    main()
